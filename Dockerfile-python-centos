# Dockerfile for Python based RDKit implementation
# Based on Centos7

FROM centos:7
LABEL maintainer="Tim Dudgeon<tdudgeon@informaticsmatters.com>"

RUN yum -y install epel-release &&\
 yum update -y &&\
 yum install -y --setopt=tsflags=nodocs --setopt=override_install_langs=en_US.utf8\
 python\
 python-devel\
 numpy\
 python2-pip\
 python-setuptools\ 
 #boost\
 #boost-python &&\
 yum clean -y all &&\
 rm -rf /var/cache/yum

ARG DOCKER_TAG=latest

COPY artifacts/centos/$DOCKER_TAG/rpms/RDKit-*-Linux-Runtime.rpm artifacts/centos/$DOCKER_TAG/rpms/RDKit-*-Linux-Python.rpm artifacts/centos/$DOCKER_TAG/boost/boost-1.56.0.tgz /tmp/
RUN cd /usr/lib64 && tar xvfz /tmp/boost-1.56.0.tgz && rm /tmp/boost-1.56.0.tgz && ls -l /usr/lib64/*boost*
RUN rpm -iv /tmp/*.rpm && rm -f /tmp/*.rpm

WORKDIR /

# add the rdkit user
RUN useradd -u 1000 -U -G 0 rdkit
USER 1000
